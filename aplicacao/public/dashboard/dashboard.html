<!DOCTYPE html>
<html lang="ptbr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOBANKING</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="../imagens/logo.ico" type="image/x-icon">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="../css/default.css">
    <link rel="stylesheet" href="../css/mensagemCard.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Allerta&display=swap');
    </style>
    <!-- scripts do Chart.js - 2022-1 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="frame-aplicacao" style="display: flex;">
        <nav class="menu-lateral" onmouseenter="exibirMenu()" onmouseleave="ocultarMenu()">
            <img src="../../imagens/mobank-logo-menu-lateral.svg" alt="Logo" class="logo-menu">
      
            <ul id="menuLateralBox">
      
              <li class="dashboard-item">
                <a href="javascript:void(0);" onclick="toggleSubmenuServidores()">
                  <span class="icon-menu"><i class="fa-solid fa-server"></i></span>
                  <span class="titulo-link-menu">Servidores </span> <i class="fa-solid setaMenuServidores fa-sort-down"></i>
                </a>
              </li>
      
              <div class="submenuServidores" onmouseenter="manterSubmenu()" onmouseleave="fecharSubmenu()">
                <li><a href="../dashboard/card.html">Máquinas</a></li>
                <li><a href="../dashboard/dashboard-individual/maikon-dashboard.html">Status hardware</a></li>
                <li><a href="../dashboard/dashboard-individual/joao-dashboard.html">Previsão de Alertas</a></li>
              </div>
      
              <li>
                <a href="../dashboard/alertas.html" href="javascript:void(0);">
                  <span class="icon-menu"><i class="fa-solid fa-triangle-exclamation"></i></span>
                  <span class="titulo-link-menu">Alertas</span>
                </a>
              </li>
              <li class="dashboard-item">
                <a href="javascript:void(0);" onclick="toggleSubmenu()">
                  <span class="icon-menu"><i class="fa-solid fa-chart-pie"></i></span>
                  <span class="titulo-link-menu">Dashboard </span> <i class="fa-solid setaMenu fa-sort-down"></i>
                </a>
              </li>
              <div class="submenu" onmouseenter="manterSubmenu()" onmouseleave="fecharSubmenu()">
                <li><a href="../dashboard/dashboard-individual/fabio-dashboard.html">Picos de Horário</a></li>
                <li><a href="../dashboard/dashboard-individual/kaua-dashboard.html">Alertas Mensais</a></li>
                <li><a href="../dashboard/dashboard-individual/faria-dashboard.html">Panorama anual</a></li>
                <li><a href="../dashboard/dashboard.html">Média de uso</a></li>
              </div>
            </ul>
      
            <div class="name-menu">
              <a href="../dashboard/usuarioInfo.html">
                <h2 id="nome_perfil_menu"></h2>
              </a>
            </div>
      
            <a class="buttonSair-menu" href="../index.html">
              <h2>Sair</h2>
            </a>
          </nav>
        <div class="conteudo">

            <h1>Média de uso dos componentes</h1>

            <!-- Seção da CPU -->

            <div class="frame-graficos">
                <div class="container">
                    <div id="frameGraficos">

                    </div>
                </div>
            </div>

        </div>
    </div>
    <!-- CARD DE ERRO -->
    <div id="cardErroMsg" class="cardMensagem fecharCardMensagem">
        <svg class="waveErro" viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M0,256L11.4,240C22.9,224,46,192,69,192C91.4,192,114,224,137,234.7C160,245,183,235,206,213.3C228.6,192,251,160,274,149.3C297.1,139,320,149,343,181.3C365.7,213,389,267,411,282.7C434.3,299,457,277,480,250.7C502.9,224,526,192,549,181.3C571.4,171,594,181,617,208C640,235,663,277,686,256C708.6,235,731,149,754,122.7C777.1,96,800,128,823,165.3C845.7,203,869,245,891,224C914.3,203,937,117,960,112C982.9,107,1006,181,1029,197.3C1051.4,213,1074,171,1097,144C1120,117,1143,107,1166,133.3C1188.6,160,1211,224,1234,218.7C1257.1,213,1280,139,1303,133.3C1325.7,128,1349,192,1371,192C1394.3,192,1417,128,1429,96L1440,64L1440,320L1428.6,320C1417.1,320,1394,320,1371,320C1348.6,320,1326,320,1303,320C1280,320,1257,320,1234,320C1211.4,320,1189,320,1166,320C1142.9,320,1120,320,1097,320C1074.3,320,1051,320,1029,320C1005.7,320,983,320,960,320C937.1,320,914,320,891,320C868.6,320,846,320,823,320C800,320,777,320,754,320C731.4,320,709,320,686,320C662.9,320,640,320,617,320C594.3,320,571,320,549,320C525.7,320,503,320,480,320C457.1,320,434,320,411,320C388.6,320,366,320,343,320C320,320,297,320,274,320C251.4,320,229,320,206,320C182.9,320,160,320,137,320C114.3,320,91,320,69,320C45.7,320,23,320,11,320L0,320Z"
                fill-opacity="1"></path>
        </svg>

        <div style="background-color: white;" class="icon-containerErro">

            <i style="color: #d56c6c;" class="fa-solid fa-circle-exclamation"></i>

        </div>
        <div class="message-text-container">
            <p class="message-textErro">Mensagem de erro</p>
            <p class="sub-text" id="descCardErro"></p>
        </div>
        <svg onclick="fecharCardErroMensagem()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15" stroke-width="0"
            fill="none" stroke="currentColor" class="cross-icon">
            <path fill="currentColor"
                d="M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z"
                clip-rule="evenodd" fill-rule="evenodd"></path>
        </svg>
    </div>
</body>

</html>

<script>

    let submenuAberto = false;

    function toggleSubmenu() {
    const submenu = document.querySelector('.submenu');
    const seta = document.querySelector('.setaMenu');

    submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
    submenuAberto = submenu.style.display === 'block';

    if (submenuAberto) {
      seta.classList.add("girarSeta");
    } else {
      seta.classList.remove("girarSeta");
    }
  }

  function toggleSubmenuServidores() {
    const submenu = document.querySelector('.submenuServidores');
    const setaServidores = document.querySelector('.setaMenuServidores');

    submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
    submenuAberto = submenu.style.display === 'block';

    if (submenuAberto) {
      setaServidores.classList.add("girarSetaServidores");
    } else {
      setaServidores.classList.remove("girarSetaServidores");
    }
  }

  function exibirMenu() {
    const menuLateral = document.querySelector('.menu-lateral');
    menuLateral.classList.add('menu-aberto');
  }

  function ocultarMenu() {
    const submenu = document.querySelector('.submenu');
    const submenuServidores = document.querySelector('.submenuServidores');
    const seta = document.querySelector('.setaMenu');
    const setaServidores = document.querySelector('.setaMenuServidores');

    // Fecha o submenu e redefine o ícone de seta quando o mouse sai do nav
    submenu.style.display = 'none';
    submenuServidores.style.display = 'none';
    seta.classList.remove("girarSeta");
    setaServidores.classList.remove("girarSetaServidores");
    submenuAberto = false;
    submenuServidoresAberto = false;
  }

    const menuLaterealHTML = document.getElementById('menuLateralBox')
    var sessTipoUsuario = sessionStorage.ID_TIPO_USUARIO
    var idEmpresa = sessionStorage.ID_EMPRESA;
    if (sessTipoUsuario == 1) {
        menuLaterealHTML.innerHTML += `
     <li>
          <a href="funcionarios.html">
            <span class="icon-menu"><i class="fa-solid fa-user"></i></span>
            <span class="titulo-link-menu">Funcionários</span>
          </a>
        </li>
    `
    }
    const frameGraficos = document.getElementById('frameGraficos')
    if (sessionStorage.ID_PLANO == 1) {
        frameGraficos.innerHTML = `
            <div class= "container">
                <span class="tituloGraficos">CPU</span>

                <input id="cpuInput1" type="date" class="input1 custom-date">

                <span>a</span>

                <input id="cpuInput2" type="date" class="input2 custom-date">

                <button class="pesquisarButton" onclick="obterDadosGraficoCPU()">Pesquisar</button>

                <canvas id="graficoCPU-box"></canvas>
            </div>
            <div class= "container">

                <!-- Seção da Memória -->
                <span class="tituloGraficos">Memória</span>

                <input type="date" class="input1 custom-date" id="ramInput1">

                <span>a</span>

                <input type="date" class="input2 custom-date" id="ramInput2">
                <button class="pesquisarButton" onclick="obterDadosGraficoRAM()">Pesquisar</button>
                <canvas id="graficoRAM-box">GRÁFICOS</canvas>
            </div>
            
                    
        `
    }

    if (sessionStorage.ID_PLANO == 2) {
        frameGraficos.innerHTML = `
            <div class= "container">
                <span class="tituloGraficos">CPU</span>

                <input id="cpuInput1" type="date" class="input1 custom-date">

                <span>a</span>

                <input id="cpuInput2" type="date" class="input2 custom-date">

                <button class="pesquisarButton" onclick="obterDadosGraficoCPU()">Pesquisar</button>

                <canvas id="graficoCPU-box"></canvas>
            </div>
            <div class= "container">

                <!-- Seção da Memória -->
                <span class="tituloGraficos">Memória</span>

                <input type="date" class="input1 custom-date" id="ramInput1">

                <span>a</span>

                <input type="date" class="input2 custom-date" id="ramInput2">
                <button class="pesquisarButton" onclick="obterDadosGraficoRAM()">Pesquisar</button>
                <canvas id="graficoRAM-box">GRÁFICOS</canvas>
            </div>
            <div class= "container">
                <!-- Seção da Disco -->
                <span class="tituloGraficos">Disco</span>

                <input type="date" class="input1 custom-date" id="discoInput1">

                <span>a</span>

                <input type="date" class="input2 custom-date" id="discoInput2">
                <button class="pesquisarButton" onclick="obterDadosGraficoDISCO()>Pesquisar</button>
                <canvas id="graficoDISCO-box"></canvas>

            </div>
                    
        `
    }

    if (sessionStorage.ID_PLANO == 3) {
        frameGraficos.innerHTML = `
        <div class= "container">
        <span class="tituloGraficos">CPU</span>

                <input id="cpuInput1" type="date" class="input1 custom-date">

                <span>a</span>

                <input id="cpuInput2" type="date" class="input2 custom-date">

                <button class="pesquisarButton" onclick="obterDadosGraficoCPU()">Pesquisar</button>

                <canvas id="graficoCPU-box"></canvas>
                </div>


                <!-- Seção da Memória -->
                <div class= "container">
                <span class="tituloGraficos">Memória</span>

                <input type="date" class="input1 custom-date" id="ramInput1">

                <span>a</span>

                <input type="date" class="input2 custom-date" id="ramInput2">
                <button class="pesquisarButton" onclick="obterDadosGraficoRAM()">Pesquisar</button>
                <canvas id="graficoRAM-box">GRÁFICOS</canvas>
                </div>

                <!-- Seção da Disco -->
                <div class= "container">
                <span class="tituloGraficos">Disco</span>

                <input type="date" class="input1 custom-date" id="discoInput1">

                <span>a</span>

                <input type="date" class="input2 custom-date" id="discoInput2">
                <button class="pesquisarButton" onclick="obterDadosGraficoDISCO()">Pesquisar</button>
                <canvas id="graficoDISCO-box"></canvas>
                </div>

                <!-- Seção da Rede -->
                <div class= "container">
                <span class="tituloGraficos">Rede</span>

                <input type="date" class="input1 custom-date" id="redeInput1">

                <span>a</span>

                <input type="date" class="input2 custom-date" id="redeInput2">
                <button class="pesquisarButton" onclick="obterDadosGraficoREDE()">Pesquisar</button>
                <canvas id="graficoREDE-box"></canvas>
                </div>
        `
    }

    nome_perfil_menu.innerHTML = sessionStorage.NOME_USUARIO


    window.onload = function () {
        // Função para formatar a data como YYYY-MM-DD
        function formatDate(date) {
            let day = date.getDate();
            let month = date.getMonth() + 1; // Janeiro é 0
            let year = date.getFullYear();

            // Adiciona zero à esquerda se o dia ou mês for menor que 10
            if (day < 10) day = '0' + day;
            if (month < 10) month = '0' + month;

            return `${year}-${month}-${day}`;
        }

        // Obtém a data atual
        const currentDate = new Date();

        // Calcula a data de 7 dias atrás
        const date7DaysAgo = new Date();
        date7DaysAgo.setDate(currentDate.getDate() - 6);

        // Formata as datas para o formato YYYY-MM-DD
        const formattedCurrentDate = formatDate(currentDate);
        const formattedDate7DaysAgo = formatDate(date7DaysAgo);

        if (sessionStorage.ID_PLANO >= 1) {
            document.getElementById('cpuInput1').value = formattedDate7DaysAgo;
            document.getElementById('cpuInput2').value = formattedCurrentDate;

            document.getElementById('ramInput1').value = formattedDate7DaysAgo;
            document.getElementById('ramInput2').value = formattedCurrentDate;

            obterDadosGraficoCPU()
            obterDadosGraficoRAM()
        }

        if (sessionStorage.ID_PLANO >= 2) {
            document.getElementById('discoInput1').value = formattedDate7DaysAgo;
            document.getElementById('discoInput2').value = formattedCurrentDate;
            obterDadosGraficoDISCO()
        }

        if (sessionStorage.ID_PLANO == 3) {
            document.getElementById('redeInput1').value = formattedDate7DaysAgo;
            document.getElementById('redeInput2').value = formattedCurrentDate;
            obterDadosGraficoREDE()
        }

        // Define os valores nas inputs





    };


    function obterDadosGraficoCPU() {
        let inpCPU1 = cpuInput1.value;
        let inpCPU2 = cpuInput2.value;

        let date1 = new Date(inpCPU1);
        let date2 = new Date(inpCPU2);

        const diffTime = Math.abs(date2 - date1);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        // Verificar se a diferença é maior que 7 dias
        if (!inpCPU1 || !inpCPU2) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()

        } else if (diffDays > 6) {
            descCardErro.innerHTML = "Intervalo máximo de 7 dias"
            usoCardMensagemErro()
        } else if (date2 < date1) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()
        } else {
            fetch(`/medidas/servidorMediaCPU/${idEmpresa}/${inpCPU1}/${inpCPU2},`, { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {
                        console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

                        plotarGraficoCPU(resposta);

                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');

                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });
        }


    }

    function obterDadosGraficoRAM() {
        let inpRAM1 = ramInput1.value;
        let inpRAM2 = ramInput2.value;

        let date1 = new Date(inpRAM1);
        let date2 = new Date(inpRAM2);

        const diffTime = Math.abs(date2 - date1);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        // Verificar se a diferença é maior que 7 dias
        if (!inpRAM1 || !inpRAM2) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()

        } else if (diffDays > 6) {
            descCardErro.innerHTML = "Intervalo máximo de 7 dias"
            usoCardMensagemErro()
        } else if (date2 < date1) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()
        } else {

            fetch(`/medidas/servidorMediaRAM/${idEmpresa}/${inpRAM1}/${inpRAM2},`, { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {
                        console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

                        plotarGraficoRAM(resposta);

                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');

                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });
        }
    }

    function obterDadosGraficoDISCO() {
        let inpDISCO1 = discoInput1.value;
        let inpDISCO2 = discoInput2.value;

        let date1 = new Date(inpDISCO1);
        let date2 = new Date(inpDISCO2);

        const diffTime = Math.abs(date2 - date1);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        // Verificar se a diferença é maior que 7 dias
        if (!inpDISCO1 || !inpDISCO2) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()

        } else if (diffDays > 6) {
            descCardErro.innerHTML = "Intervalo máximo de 7 dias"
            usoCardMensagemErro()
        } else if (date2 < date1) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()
        } else {

            fetch(`/medidas/servidorMediaDISCO/${idEmpresa}/${inpDISCO1}/${inpDISCO2},`, { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {
                        console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);


                        plotarGraficoDISCO(resposta);

                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');

                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });
        }
    }

    function obterDadosGraficoREDE() {
        let inpREDE1 = redeInput1.value;
        let inpREDE2 = redeInput2.value;


        let date1 = new Date(inpREDE1);
        let date2 = new Date(inpREDE2);

        const diffTime = Math.abs(date2 - date1);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

        // Verificar se a diferença é maior que 7 dias
        if (!inpREDE1 || !inpREDE2) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()

        } else if (diffDays > 6) {
            descCardErro.innerHTML = "Intervalo máximo de 7 dias"
            usoCardMensagemErro()
        } else if (date2 < date1) {
            descCardErro.innerHTML = "Verifique os campos"
            usoCardMensagemErro()
        } else {
            fetch(`/medidas/servidorMediaREDE/${idEmpresa}/${inpREDE1}/${inpREDE2},`, { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (resposta) {
                        console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

                        plotarGraficoREDE(resposta);

                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');

                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });
        }
    }


    let graficoCpuInstance = null;
    let graficoRamInstance = null;
    let graficoDiscoInstance = null;
    let graficoRedeInstance = null;

    function plotarGraficoCPU(resposta) {

        if (graficoCpuInstance) {
            graficoCpuInstance.destroy();
            console.log('Gráfico anterior destruído.');
        }

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labelsCpu = [];

        // Criando estrutura para plotar gráfico - dados
        let dadosCpu = {
            labels: labelsCpu,
            datasets: [{
                label: '',
                data: [],
            }],

        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (let i = 0; i < resposta.length; i++) {
            var registro = resposta[i];

            // Obtém e formata a data
            let data = new Date(registro.data_dia);
            let dataFormatada = data.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });

            // Obtém e formata o horário (caso seja necessário)
            let horario = data.toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // Adiciona a data formatada no array
            labelsCpu.push(dataFormatada);

            // Adiciona o valor médio
            dadosCpu.datasets[0].data.push(registro.valor_medio);
        }


        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log('dadosCpu:')
        console.log(dadosCpu.datasets)
        console.log('----------------------------------------------')


        const graficoCPU = document.getElementById('graficoCPU-box');

        graficoCpuInstance = new Chart(graficoCPU, {
            type: 'bar',
            data: {
                labels: dadosCpu.labels,
                datasets: [{
                    label: dadosCpu.datasets[0].label,
                    data: dadosCpu.datasets[0].data,
                    borderColor: 'blue',
                    backgroundColor: 'rgba(2, 255, 255, 0.5)',
                    fill: true,
                    pointBackgroundColor: 'white',
                    pointBorderColor: 'white',
                    pointRadius: 5,
                    tension: 0.1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

    }

    function plotarGraficoRAM(resposta) {


        if (graficoRamInstance) {
            graficoRamInstance.destroy();
            graficoRamInstance = null
            console.log('Gráfico anterior destruído.');
        }


        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labelsRam = [];

        // Criando estrutura para plotar gráfico - dados
        let dadosRam = {
            labels: labelsRam,
            datasets: [{
                label: '',
                data: [],
            }],

        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (let i = 0; i < resposta.length; i++) {
            var registro = resposta[i];

            // Obtém e formata a data
            let data = new Date(registro.data_dia);
            let dataFormatada = data.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });

            // Obtém e formata o horário (caso seja necessário)
            let horario = data.toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // Adiciona a data formatada no array
            labelsRam.push(dataFormatada);

            // Adiciona o valor médio
            dadosRam.datasets[0].data.push(registro.valor_medio);
        }


        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log('dadosRam:')
        console.log(dadosRam.datasets)
        console.log('----------------------------------------------')


        const graficoRAM = document.getElementById('graficoRAM-box');

        graficoRamInstance = new Chart(graficoRAM, {
            type: 'bar',
            data: {
                labels: dadosRam.labels,
                datasets: [{
                    label: dadosRam.datasets[0].label,
                    data: dadosRam.datasets[0].data,
                    borderColor: 'blue',
                    backgroundColor: 'rgba(2, 255, 255, 0.5)',
                    fill: true,
                    pointBackgroundColor: 'white',
                    pointBorderColor: 'white',
                    pointRadius: 5,
                    tension: 0.1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

    }

    function plotarGraficoREDE(resposta) {

        if (graficoRedeInstance) {
            graficoRedeInstance.destroy();
            console.log('Gráfico anterior destruído.');
        }

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labelsRede = [];

        // Criando estrutura para plotar gráfico - dados
        let dadosRede = {
            labels: labelsRede,
            datasets: [{
                label: '',
                data: [],
            }],

        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (let i = 0; i < resposta.length; i++) {
            var registro = resposta[i];

            // Obtém e formata a data
            let data = new Date(registro.data_dia);
            let dataFormatada = data.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });

            // Obtém e formata o horário (caso seja necessário)
            let horario = data.toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // Adiciona a data formatada no array
            labelsRede.push(dataFormatada);

            // Adiciona o valor médio
            dadosRede.datasets[0].data.push(registro.valor_medio);
        }


        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log('dadosRede:')
        console.log(dadosRede.datasets)
        console.log('----------------------------------------------')


        const graficoREDE = document.getElementById('graficoREDE-box');

        graficoRedeInstance = new Chart(graficoREDE, {
            type: 'bar',
            data: {
                labels: dadosRede.labels,
                datasets: [{
                    label: dadosRede.datasets[0].label,
                    data: dadosRede.datasets[0].data,
                    borderColor: 'blue',
                    backgroundColor: 'rgba(2, 255, 255, 0.5)',
                    fill: true,
                    pointBackgroundColor: 'white',
                    pointBorderColor: 'white',
                    pointRadius: 5,
                    tension: 0.1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    function plotarGraficoDISCO(resposta) {

        if (graficoDiscoInstance) {
            graficoDiscoInstance.destroy();
            console.log('Gráfico anterior destruído.');
        }

        console.log('iniciando plotagem do gráfico...');

        // Criando estrutura para plotar gráfico - labels
        let labelsRede = [];

        // Criando estrutura para plotar gráfico - dados
        let dadosRede = {
            labels: labelsRede,
            datasets: [{
                label: '',
                data: [],
            }],

        };

        console.log('----------------------------------------------')
        console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
        console.log(resposta)

        // Inserindo valores recebidos em estrutura para plotar o gráfico
        for (let i = 0; i < resposta.length; i++) {
            var registro = resposta[i];

            // Obtém e formata a data
            let data = new Date(registro.data_dia);
            let dataFormatada = data.toLocaleDateString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });

            // Obtém e formata o horário (caso seja necessário)
            let horario = data.toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // Adiciona a data formatada no array
            labelsRede.push(dataFormatada);

            // Adiciona o valor médio
            dadosRede.datasets[0].data.push(registro.valor_medio);
        }


        console.log('----------------------------------------------')
        console.log('O gráfico será plotado com os respectivos valores:')
        console.log('Labels:')
        console.log('dadosRede:')
        console.log(dadosRede.datasets)
        console.log('----------------------------------------------')


        const graficoREDE = document.getElementById('graficoDISCO-box');

        graficoDiscoInstance = new Chart(graficoREDE, {
            type: 'bar',
            data: {
                labels: dadosRede.labels,
                datasets: [{
                    label: dadosRede.datasets[0].label,
                    data: dadosRede.datasets[0].data,
                    borderColor: 'blue',
                    backgroundColor: 'rgba(2, 255, 255, 0.5)',
                    fill: true,
                    pointBackgroundColor: 'white',
                    pointBorderColor: 'white',
                    pointRadius: 5,
                    tension: 0.1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }


    // Funções de card de alerta

    // esse é o id = descCardSucesso para innerHTML a mensagem de sucesso
    function abrirCardSucesoMensagem() {

        const card = document.getElementById("cardSucessoMsg");
        card.classList.remove("fecharCardMensagem");
        card.classList.add("abriCardMensagem");
    }
    function fecharCardSucessoMensagem() {
        const card = document.getElementById("cardSucessoMsg");
        card.classList.remove("abriCardMensagem");
        card.classList.add("fecharCardMensagem");
    }
    // esse é o id = descCardErro para innerHTML a mensagem de sucesso
    function fecharCardErroMensagem() {
        const card = document.getElementById("cardErroMsg");
        card.classList.remove("abriCardMensagem");
        card.classList.add("fecharCardMensagem");
    }
    function abrirCardErroMensagem() {
        const card = document.getElementById("cardErroMsg");
        card.classList.remove("fecharCardMensagem");
        card.classList.add("abriCardMensagem");
    }
    function usoCardMensagemErro() {
        abrirCardErroMensagem();
        setTimeout(() => {
            fecharCardErroMensagem();
        }, "7000");
    }
    function usoCardMensagemSucesso() {
        abrirCardSucesoMensagem();
        setTimeout(() => {
            fecharCardSucessoMensagem();
        }, "7000");
    }
</script>